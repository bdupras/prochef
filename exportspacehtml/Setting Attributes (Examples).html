<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Chef : Setting Attributes (Examples)</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Chef : Setting Attributes (Examples)
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Mar 07, 2012 by <font color="#0050B2">jimwichelman</font>.
				    </div>

				    <table class="sectionMacro" border="0" cellpadding="5" cellspacing="0" width="100%"><tbody><tr>
<td class="confluenceTd" valign="top" width="3%"></td>
<td class="confluenceTd" valign="top">
<p><br class="atl-forced-newline" /></p>
<div class='navmenu' style='float:right; width:540px; background:#eeeeee; border:4px solid #d7d4c3; margin:10px; padding:4px'><h5><a name="SettingAttributes%28Examples%29-"></a><div class="" align="center"><font color="navy">The precedence of the attributes - from low to high</font></div>
</h5>
<ul>
	<li><tt>default</tt> attributes applied in an attributes file</li>
	<li><tt>default</tt> attributes applied in an environment</li>
	<li><tt>default</tt> attributes applied in a role</li>
	<li><tt>default</tt> attributes applied on a node directly in a recipe</li>
	<li><tt>normal</tt> or <tt>set</tt> attributes applied in an attributes file</li>
	<li><tt>normal</tt> or <tt>set</tt> attributes applied on a node directly in a recipe</li>
	<li><tt>override</tt> attributes applied in an attributes file</li>
	<li><tt>override</tt> attributes applied in a role</li>
	<li><tt>override</tt> attributes applied in an environment</li>
	<li><tt>override</tt> attributes applied on a node directly in a recipe</li>
</ul>
</div>

<p><span class="image-wrap" style="float: left"><img src="../attachments/8257848/20840584.jpg" hspace="12" vspace="8" style="border: 0px solid black"/></span></p>

<h1><a name="SettingAttributes%28Examples%29-SettingAttributes%28Examples%29"></a>Setting Attributes (Examples)</h1>

<h5><a name="SettingAttributes%28Examples%29-"></a><font color="#f7681a"><tt>default</tt></font> <font color="#f7681a">attributes applied in an attributes file have the lowest priority and</font> <font color="#f7681a"><tt>override</tt></font> <font color="#f7681a">attributes applied on a node directly in a recipe have the highest priority.</font> <font color="#f7681a">Again, the exception to this are</font> <font color="#f7681a"><a href="Automatic Attributes.html" title="Automatic Attributes">Automatic Attributes</a></font><font color="#f7681a">, as these are regenerated by</font> <font color="#f7681a"><a href="Ohai.html" title="Ohai">Ohai</a></font> <font color="#f7681a">every time Chef runs.</font></h5>

<p><br class="atl-forced-newline" />
<br class="atl-forced-newline" />
<br class="atl-forced-newline" />
<br class="atl-forced-newline" /></p>

<h3><a name="SettingAttributes%28Examples%29-Defaultin..%2Fcookbooks%2F..%2Fattributes%2Fdefault.rb"></a>Default in ../cookbooks/../attributes/default.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #1</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">default["apache"]["dir"] = "/etc/apache2"</pre>
		</div>
</div></div>

<h3><a name="SettingAttributes%28Examples%29-Defaultin..%2Fenvironments%2Fenvironmentname.rb"></a>Default in ../environments/environment_name.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #2</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">default_attributes({ "apache" =&gt; {"dir" =&gt; "/etc/apache2"}})</pre>
		</div>
</div></div>

<h3><a name="SettingAttributes%28Examples%29-Defaultin..%2Froles%2Frolename.rb"></a>Default in ../roles/rolename.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #3</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">default_attributes({ "apache" =&gt; {"dir" =&gt; "/etc/apache2"}})</pre>
		</div>
</div></div>

<h3><a name="SettingAttributes%28Examples%29-DefaultinNodeobjectinarecipe..%2Fcookbooks%2F..%2Frecipe%2Fdefault.rb"></a>Default in Node object in a recipe ../cookbooks/../recipe/default.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #4</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">node.default["apache"]["dir"] = "/etc/apache2"</pre>
		</div>
</div></div>

<h3><a name="SettingAttributes%28Examples%29-NormalorSetin..%2Fcookbooks%2F..%2Fattributes%2Fdefault.rb"></a>Normal or Set  in ../cookbooks/../attributes/default.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #5</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">set["apache"]["dir"] = "/etc/apache2"

normal["apache"]["dir"] = "/etc/apache2"  #set is an alias of normal.</pre>
		</div>
</div></div>

<h3><a name="SettingAttributes%28Examples%29-SettingaNormal%2FSetinarecipe..%2Fcookbooks%2F..%2Frecipe%2Fdefault.rb"></a>Setting a Normal/Set in a recipe ../cookbooks/../recipe/default.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #6</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">node.set["apache"]["dir"] = "/etc/apache2"

node.normal["apache]["dir"] = "/etc/apache2" # Same as above
node["apache"]["dir"] = "/etc/apache2"       # Same as above</pre>
		</div>
</div></div>

<h3><a name="SettingAttributes%28Examples%29-Overridein..%2Fcookbooks%2F..%2Fattributes%2Fdefault.rb"></a>Override in ../cookbooks/../attributes/default.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #7</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">override["apache"]["dir"] = "/etc/apache2"</pre>
		</div>
</div></div>

<h3><a name="SettingAttributes%28Examples%29-Overridein...%2Froles%2Frolename.rb"></a>Override in .../roles/rolename.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #8</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">override_attributes({ "apache" =&gt; {"dir" =&gt; "/etc/apache2"}})</pre>
		</div>
</div></div>

<h3><a name="SettingAttributes%28Examples%29-Overridein..%2Fenvironments%2Fenvironmentname.rb"></a>Override in ../environments/environment_name.rb</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #9</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">override_attributes({ "apache" =&gt; {"dir" =&gt; "/etc/apache2"}})</pre>
		</div>
</div></div>


<h3><a name="SettingAttributes%28Examples%29-OverrideinNodeobject%28fromrecipe%29"></a>Override in Node object (from recipe)</h3>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>Example Precedence #10</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">node.override["apache"]["dir"] = "/etc/apache2"</pre>
		</div>
</div></div>
<p><br class="atl-forced-newline" />
<br class="atl-forced-newline" />
<br class="atl-forced-newline" />
<br class="atl-forced-newline" /></p></td>
<td class="confluenceTd" valign="top" width="5%"></td></tr></tbody></table>
<table class="sectionMacro" border="0" cellpadding="5" cellspacing="0" width="100%"><tbody><tr>

<hr />
<td class="confluenceTd" valign="top" width="45%">

<p><span class="image-wrap" style="float: left"><img src="../attachments/8257848/20840583.png" hspace="4" style="border: 0px solid black"/></span><br/>
<a href="Cookbook Attributes.html" title="Cookbook Attributes">Cookbook Attributes</a></p>
</td>
<td class="confluenceTd" valign="top" width="40%"></td>

<td class="confluenceTd" valign="top" width="15%">

<p><span class="image-wrap" style="float: right"><img src="../attachments/8257848/20840582.png" hspace="4" style="border: 0px solid black"/></span><br/>
<a href="Definitions.html" title="Definitions">Definitions</a></p>


<p><br class="atl-forced-newline" />
<br class="atl-forced-newline" /></p></td></tr></tbody></table>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">
                                <h2>Attachments:</h2>
                            </a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="../attachments/8257848/20840582.png">rightarrow.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="../attachments/8257848/20840583.png">leftarrow.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="../attachments/8257848/20840584.jpg">5096749-keyboard--pen.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
				    
                                            <div class="tabletitle">
                            <a name="comments">
                                <h2>Comments:</h2>
                            </a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-10387464"></a>
                                    <font class="smallfont"><p>Is there a method for deleting an attribute from a node?</p>

<p>Update: It looks like this works in knife:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">knife exec -E 'nodes.transform("name:#{Chef::Config[:node_name]}") {|n| n.delete(:whatever)}'</pre>
		</div>
</div></div>

<p>I'm still not sure how to do it in a recipe or attributes file though</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by mconigliaro at Mar 22, 2011 16:48
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-10387516"></a>
                                    <font class="smallfont"><p>Attributes files in cookbooks are for setting attributes, not deleting them <img class="emoticon" src="images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/>.</p>

<p>In a recipe, you'd just use</p>

<p>node.delete(:whatever)</p>
</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by jtimberman at Mar 24, 2011 00:43
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-10387517"></a>
                                    <font class="smallfont"><p>PSA: Attributes only support <tt>#delete</tt> as of Chef 0.9.14</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by dan@kallistec.com at Mar 24, 2011 15:49
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-24773191"></a>
                                    <font class="smallfont"><p>Isn't example #5 redundant with example #6?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by michael.john.kirk@gmail.com at Jul 12, 2012 17:48
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://wiki.opscode.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Aug 04, 2012 00:03</font></td>
		    </tr>
	    </table>
    </body>
</html>
