<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Chef : Setting the run_list in JSON during run time</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Chef : Setting the run_list in JSON during run time
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Apr 10, 2012 by <font color="#0050B2">kkenny</font>.
				    </div>

				    <td class="confluenceTd" valign="top" width="70%"></td>
<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Work in progress on this page.</b><br />nuo@opscode.com</td></tr></table></div>

<p>The JSON attributes file can be used to add specific <a href="Roles.html" title="Roles">Roles</a> or <a href="Recipes.html" title="Recipes">Recipes</a> to a node during chef-client/chef-solo run time.</p>

<p>For example, the JSON file should look like:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>base.json</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: javascript; gutter: false">{ "run_list": [ "role[base]" ] }</pre>
		</div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>ops_master.json</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: javascript; gutter: false">{ "run_list": [ "role[base]", "role[ops_master]" ] }</pre>
		</div>
</div></div>

<div class="code panel" style="border-width: 1px;"><div class="codeHeader panelHeader" style="border-bottom-width: 1px;"><b>ops_monitor.json</b></div><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: javascript; gutter: false">{ "run_list": [ "role[base]", "recipe[nagios::server]", "recipe[ganglia::server]" ] }</pre>
		</div>
</div></div>

<p>Then run chef-client/chef-solo with -j, for example:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">chef-client -j base.json</pre>
		</div>
</div></div>

<p>It should be noted that when running <em>chef-client -j</em> on an established node that currently has a run list, you will clear that run list and set it to what is specified in the .json file.  This could also impact other attributes set in the node object, such as the roles attribute.  Be sure to output all of the node attributes prior to setting a new run_list via the json file.  This example comes into play when one may try to do a chef run against only one recipe, such as when adding users to a node from an admins cookbook.</p>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://wiki.opscode.com/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Aug 04, 2012 00:03</font></td>
		    </tr>
	    </table>
    </body>
</html>
