Setting Attributes (Examples)
=============================

  

##### 

The precedence of the attributes - from low to high

-   `default` attributes applied in an attributes file
-   `default` attributes applied in an environment
-   `default` attributes applied in a role
-   `default` attributes applied on a node directly in a recipe
-   `normal` or `set` attributes applied in an attributes file
-   `normal` or `set` attributes applied on a node directly in a recipe
-   `override` attributes applied in an attributes file
-   `override` attributes applied in a role
-   `override` attributes applied in an environment
-   `override` attributes applied on a node directly in a recipe

![image](../attachments/8257848/20840584.jpg)

Setting Attributes (Examples)
=============================

##### `default` attributes applied in an attributes file have the lowest priority and `override` attributes applied on a node directly in a recipe have the highest priority. Again, the exception to this are [Automatic Attributes](Automatic%20Attributes.html "Automatic Attributes"), as these are regenerated by [Ohai](Ohai.html "Ohai") every time Chef runs.

  
  
  
  

### Default in ../cookbooks/../attributes/default.rb

**Example Precedence \#1**

    default["apache"]["dir"] = "/etc/apache2"

### Default in ../environments/environment\_name.rb

**Example Precedence \#2**

    default_attributes({ "apache" => {"dir" => "/etc/apache2"}})

### Default in ../roles/rolename.rb

**Example Precedence \#3**

    default_attributes({ "apache" => {"dir" => "/etc/apache2"}})

### Default in Node object in a recipe ../cookbooks/../recipe/default.rb

**Example Precedence \#4**

    node.default["apache"]["dir"] = "/etc/apache2"

### Normal or Set in ../cookbooks/../attributes/default.rb

**Example Precedence \#5**

    set["apache"]["dir"] = "/etc/apache2"

    normal["apache"]["dir"] = "/etc/apache2"  #set is an alias of normal.

### Setting a Normal/Set in a recipe ../cookbooks/../recipe/default.rb

**Example Precedence \#6**

    node.set["apache"]["dir"] = "/etc/apache2"

    node.normal["apache]["dir"] = "/etc/apache2" # Same as above
    node["apache"]["dir"] = "/etc/apache2"       # Same as above

### Override in ../cookbooks/../attributes/default.rb

**Example Precedence \#7**

    override["apache"]["dir"] = "/etc/apache2"

### Override in .../roles/rolename.rb

**Example Precedence \#8**

    override_attributes({ "apache" => {"dir" => "/etc/apache2"}})

### Override in ../environments/environment\_name.rb

**Example Precedence \#9**

    override_attributes({ "apache" => {"dir" => "/etc/apache2"}})

### Override in Node object (from recipe)

**Example Precedence \#10**

    node.override["apache"]["dir"] = "/etc/apache2"

  
  
  
  

  

Is there a method for deleting an attribute from a node?

Update: It looks like this works in knife:

    knife exec -E 'nodes.transform("name:#{Chef::Config[:node_name]}") {|n| n.delete(:whatever)}'

I'm still not sure how to do it in a recipe or attributes file though

![image](images/icons/comment_16.gif) Posted by mconigliaro at Mar 22,
2011 16:48

Attributes files in cookbooks are for setting attributes, not deleting
them ![image](images/icons/emoticons/smile.gif).

In a recipe, you'd just use

node.delete(:whatever)

![image](images/icons/comment_16.gif) Posted by jtimberman at Mar 24,
2011 00:43

PSA: Attributes only support `#delete` as of Chef 0.9.14

![image](images/icons/comment_16.gif) Posted by dan@kallistec.com at Mar
24, 2011 15:49

Isn't example \#5 redundant with example \#6?

![image](images/icons/comment_16.gif) Posted by
michael.john.kirk@gmail.com at Jul 12, 2012 17:48
